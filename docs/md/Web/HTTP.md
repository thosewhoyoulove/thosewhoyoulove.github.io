# HTTP

## 1. HTTP 是什么？

HTTP（HyperText Transfer Protocol）是万维网（World Wide Web）的基础协议。自 Tim Berners-Lee 博士和他的团队在 1989-1991 年间创造出它以来，HTTP 已经发生了太多的变化，在保持协议简单性的同时，不断扩展其灵活性。如今，HTTP 已经从一个只在实验室之间交换文件的早期协议进化到了可以传输图片，高分辨率视频和 3D 效果的现代复杂互联网协议。

## 2. HTTP 的请求方法

HTTP 的请求方法有以下几种：

- GET
- POST
- PUT
- DELETE
- HEAD
- OPTIONS
- TRACE
- CONNECT

## 3. HTTP版本

### 1. HTTP/1.0

- 单请求/单响应：每次请求都需要建立一次 TCP 连接，响应结束后连接关闭。
- 缺少持久连接：HTTP/1.0 默认每次请求都会建立新的 TCP 连接，导致大量的连接开销。
- 性能瓶颈：每个请求都需要建立和关闭连接，导致高延迟和网络负担，尤其是当页面中包含多个资源时（如图片、CSS、JS 等）。
- 没有管道化（Pipelining）：请求必须依次处理，无法并行发送多个请求。

### 2. HTTP/1.1

- 持久连接（Keep-Alive）：默认使用持久连接，允许多个请求/响应在同一个 TCP 连接上完成，减少了连接的建立和关闭开销。
- 管道化（Pipelining）：支持请求和响应的并行处理，客户端可以在等待响应的同时发起后续请求，但这一特性在实际应用中较少被使用，因为它容易产生队头阻塞问题。
- 分块传输编码（Chunked Transfer Encoding）：允许在不知道内容长度的情况下分段发送数据。
- 更多的请求头字段：引入了更多请求头字段（如 Host），使得支持虚拟主机变得更容易。
- 增强的缓存机制：通过 Cache-Control 和 If-Modified-Since 等头部字段，支持更细粒度的缓存控制。

### 3. HTTP/2

- 二进制协议：HTTP/2 引入了二进制传输格式，相比 HTTP/1.x 的文本格式，二进制协议更加高效，易于解析和优化。
- 多路复用（Multiplexing）：允许多个请求和响应在同一个连接上并行传输，避免了 HTTP/1.x 中的队头阻塞问题。即使一个请求较慢，其他请求仍能继续进行。
- 头部压缩（HPACK）：通过对 HTTP 头部进行压缩，减少了带宽的使用，特别是在多个请求中头部重复的数据。
- 服务器推送（Server Push）：允许服务器主动将资源推送到客户端，减少客户端等待时间，提升页面加载速度。
- 改进的流量控制：提供了更细粒度的流量控制，避免了网络带宽的浪费。
- 保持连接持久性：仍然保持持久连接，但连接更加高效。

### 4. HTTP/3

- 基于 QUIC 协议：HTTP/3 使用 QUIC（Quick UDP Internet Connections）协议作为传输层，而不是传统的 TCP。QUIC 基于 UDP，可以减少连接建立时间（0-RTT）并提高数据传输效率。
- 更低的延迟：QUIC 可以减少连接和加密握手的延迟，尤其适合移动网络等高延迟环境。
- 多路复用和头部压缩：保留了 HTTP/2 的多路复用和头部压缩特性，进一步提升传输效率。
- 抗丢包能力强：由于 QUIC 是基于 UDP 的协议，它在面对丢包时更具恢复能力，不像 TCP 那样影响整个连接的性能。
- 加密默认启用：HTTP/3 强制使用加密（TLS 1.3），进一步提升了安全性。

总结：

- HTTP/1.0 简单，但效率低，不能充分利用现代网络的性能。
- HTTP/1.1 提供了持久连接和一些优化，但依然受限于单一连接的性能瓶颈。
- HTTP/2 通过二进制协议和多路复用显著提高了性能，减少了延迟。
- HTTP/3 在 HTTP/2 的基础上，使用 QUIC 协议进一步降低延迟，提升了移动网络和丢包环境中的表现。
